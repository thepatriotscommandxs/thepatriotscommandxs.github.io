<!DOCTYPE html>
<html>
  <body>
    <h1>Scholarle</h1>
    <div>
    <h2 id="correct"></h2>
  </div>
    <label id="guess" for="guess">Answer:</label>
    <input type="text" id="inputForm" name="guess" autocomplete="off" />

      <div>
    <button onclick="addCount()" id="button" type="button">Submit Guess</button>
      </div>
    

    <p id="Prompt"></p>
    <p id="DUMMY"></p>
    <p id="Logger"></p>

    <script>
        let CurrentHint = '';
        window.score = 0;
      function initRun() {

        
        fetch('https://raw.githubusercontent.com/thepatriotscommandxs/thepatriotscommandxs.github.io/main/total.txt')

        .then(response => response.text())
          .then(text => {
              let full = text.split("']\r\n");

              const rand = Math.round(Math.random() * full.length);



              function checkStr() {
              if(full[rand]=="undefined") {
                const rand = Math.round(Math.random() * full.length);
                checkStr()

                }

                else {

              	window.AnsHint = full[rand].split("', '");
              	window.Ans = AnsHint[0].replace("['","");
              	window.ArrayAns = Ans.split('');
                  window.Hint = AnsHint[1].replace(/;/gi,"-")
                  window.sentences = Hint.split(". ")


                  window.CurrentHint =+ sentences[window.count];


                  document.getElementById('DUMMY').innerHTML = count;
              	document.getElementById('Prompt').innerHTML = ArrayAns+"  =====>>"+sentences[count];






                }
      		}

              checkStr()








          });


      }
      var textBox = document.getElementById("inputForm");
      var button = document.getElementById('button')

      
        textBox.addEventListener("keyup", function (event) {
           // Checking if key pressed is ENTER or not
           // if the key pressed is ENTER
           // click listener on button is called
           if (event.keyCode == 13) {
            
               button.click()
           }
     }

        );
      window.count = 0;
      function addCount(){


        if(document.getElementById('inputForm').value != ""){
        if(count < window.sentences.length-1) {
      window.count+=1

            window.Guess = document.getElementById('inputForm').value
            


      document.getElementById('inputForm').value = ""
      document.getElementById('Logger').innerHTML = ""

            

      run()

        } else {
            runFinal()
        }} else {
            document.getElementById('Logger').innerHTML = "Please Input Text before Submit"
        }
      }

      function inAnswer() {
                for (let i = 0; i < window.Guess.length; i++) {
          // Check if the character at the same index in the control word is the same as the user input
          if (window.Guess[i] === ArrayAns[i]) {
            // If so, add 1 to the score
            window.score += 1;
          }

        }
        window.similarity = Math.round((window.score / window.Guess.length) * 10);
        document.getElementById('correct').innerHTML = window.score

        if(similarity>=7) {
          window.wasCorrect = "True"
          document.getElementById('correct').innerHTML = "CORRECT!!"

        }

              }

      function run() {

        window.Guess = document.getElementById('inputForm').value.split('')


        inAnswer()

        if(window.wasCorrect=="True") {
          document.getElementById('Prompt').innerHTML = "Congrats!"
          document.getElementById('DUMMY').innerHTML = ""
          return ""
        }


        
        document.getElementById('Prompt').innerHTML = document.getElementById('Prompt').innerHTML + ". "+ window.sentences[window.count];

        document.getElementById('DUMMY').innerHTML = window.count;

        window.CurrentHint += window.sentences[window.count] +"."




          }

        function runFinal(){
            document.getElementById('DUMMY').innerHTML = "Final Guess!";

        }


      initRun()
    </script>
  </body>
</html>
