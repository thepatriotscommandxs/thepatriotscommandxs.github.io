<!DOCTYPE html>
<html>
  <body>
    <h1>Scholarle</h1>

    <form id="myForm" autocomplete="off" method="post">
      <label id="guess" for="guess">Answer:</label>
      <input type="text" id="inputForm" name="guess" />
      <div>
        <button onclick="addCount()" type="button">submit</button>
      </div>
    </form>

    <p id="Prompt"></p>
    <p id="DUMMY"></p>
    <p id="Logger"></p>

    <script>
        let CurrentHint = '';
        
        function getTitles() {
            fetch("https://github.com/thepatriotscommandxs/thepatriotscommandxs.github.io/tree/main/data")
                .then((result) => { return result.text(); document.getElementById('Logger').innerHTML = result.text() })
                .then((content) => { 
                text = text.replaceAll ("\r", "").replaceAll ("\n", "");
                
                full = text.split('-open Link--primary" title="');
        
                  
                delete full[0]
                  
                  for(i = full.length-1;i--;) {
                    const reg = /data-turbo-frame="repo-content-turbo-frame"+.*/gi
                    if(full[i]!=undefined) {
                    
                    full[i] = full[i].replace(reg,"")

                    full[i] = full[i].replace('"',"")
                    
                    }
                  } 

                  const rand2 = Math.round(Math.random() * full.length);

                  window.webSite = full[rand2]
                }).catch(e => document.getElementById('Logger').innerHTML = e/* console.log(e))*/)}



            
            


                getTitles()

      function initRun() {


        fetch('https://raw.githubusercontent.com/thepatriotscommandxs/thepatriotscommandxs.github.io/main/data/'+window.webSite)

        .then(response => response.text())
          .then(text => {
              let full = text.split("']\n");
              const rand = Math.round(Math.random() * full.length);



              function checkStr() {
              if(full[rand]=="undefined") {
                const rand = Math.round(Math.random() * full.length);
                checkStr()

                }

                else {

              	window.AnsHint = full[rand].split("', '");
              	window.Ans = AnsHint[0].replace("['","");
              	window.ArrayAns = Ans.split(" ");
                  window.Hint = AnsHint[1].replace(/;/gi,"-")
                  window.sentences = Hint.split(". ")


                  window.CurrentHint =+ sentences[window.count];


                  document.getElementById('DUMMY').innerHTML = count;
              	document.getElementById('Prompt').innerHTML = ArrayAns+"  =====>>"+sentences[count];






                }
      		}

              checkStr()








          });


      }


      window.count = 0;
      function addCount(){


        if(document.getElementById('inputForm').value != ""){
        if(count < window.sentences.length-1) {
      window.count+=1

            window.Guess = document.getElementById('inputForm').value
            


      document.getElementById('inputForm').value = ""
      document.getElementById('Logger').innerHTML = ""

            

      run()

        } else {
            runFinal()
        }} else {
            document.getElementById('Logger').innerHTML = "Please Input Text before Submit"
        }
      }



      function run() {

        document.getElementById('Prompt').innerHTML = document.getElementById('Prompt').innerHTML + ". "+ window.sentences[window.count];

        document.getElementById('DUMMY').innerHTML = window.count;

        window.CurrentHint += window.sentences[window.count] +"."




          }

        function runFinal(){
            document.getElementById('DUMMY').innerHTML = "Final Guess!";

        }


      initRun()
    </script>
  </body>
</html>
